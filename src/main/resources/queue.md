# 队列业务说明：

本项目引用队列的原因：替代传统上的从数据库中取数据，去完之后的数据就变成无用的数据，即造成了数据冗余
也会导致随着时间的增加，在数据库中检索数据的时间增长，影响效率。

本项目暂时使用的队列：  


| 序号 | 表名 |说明|
| :---: | --- |----|
| 1 | wait_download_queue |待下载url队列|
| 2 | success_queue |下载并解析成功url队列|
| 3 | fail_queue |下载或解析失败url队列|
| 4 | contain_queue |站内url和外链url关系队列|


一、队列名：wait_download_queue（队列中数据类型为String）
说明：此队列是存放待下载url的队列
    与“下载接口”、“解析链接接口”对接
    入队列：解析站内URL的结果需要去重（查找：wait_download_queue，success_queue，fail_queue）
            去重之后的结果入队列
    出队列：与下载模块对接，下载模块对每一条url进行下载

二、队列名：success_queue（队列中数据类型为String）
说明：为了一个站内的所有已经下载成功和解析成功的站内链接进行记录，同时也为了每天不重复下载同一条，
因此，设置success_queue
    与“解析页面详情接口”对接
    入队列：只有当本条url下载和解析都成功时，才将这条url加入此队列
    出队列：当日期变更，清空此队列

三、队列名：fail_queue（队列中数据类型为String）
说明：此队列的作用和success_queue作用大体相同，为了记录下载失败或解析失败的url
      分别与“下载接口”和“解析页面详情接口”对接
    入队列：下载或者解析失败时，将数据入队列
    出队列：当日期变更，清空此队列

四、队列名：contain_queue（队列中数据类型Map<String,List<String>>）

说明：
    数据类型说明：每一个解析页面时，得到的站内url和外链的关系是一对多关系，
    即一个站内url对应多个外链，所以设置为Map
    队列说明：和解析模块的解析链接接口对接，解析链接接口返回的Links类中封装了对类类型Map
    入队列：解析链接的得到的url对应关系集合入队列
    出队列：出队列的Map调用“获取所给url的主站点url（一级域名） 接口”的获得一级域名后
            持久化到数据库
